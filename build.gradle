apply plugin: 'java'
apply plugin: 'war'

loadConfigFile();

task "create-dirs" << {
	webAppDir.mkdirs();
	sourceSets*.java.srcDirs*.each { it.mkdirs() }    
	sourceSets*.resources.srcDirs*.each{ it.mkdirs() }
}

task cg(dependsOn: 'create-dirs')  << {
//	println "package:$config"
	println "package:$config.project.packageName"

}

def loadConfigFile() {
	def softwareStack = hasProperty('env') ? env : 'spring_RESTful'
	setProperty 'softwareStack', softwareStack
	println "Software Stack is set to $softwareStack"
	def configFile = file('config.groovy')
	def config = new ConfigSlurper(softwareStack).parse(configFile.toURL())
	setProperty 'config', config
}
